/**
 * Angular table for material design
 * @version v0.0.0 - 2015-02-15
 * @link https://github.com/pmackowski/angular-cc-material-table
 * @author pmackowski <pmackowski@coffeecode.pl>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(a,b){"use strict";function c(a){function b(){return g.items.length>0}function c(b,c){return a.groupByColumn&&(b||g.items[c-1][a.groupByColumn]!==g.items[c][a.groupByColumn])}function d(a){return g.sortColumn===a&&g.sortReverse?" (desc)":g.sortColumn!==a||g.sortReverse?void 0:" (asc)"}function e(a){a&&(g.sortReverse=a===g.sortColumn&&!g.sortReverse,g.sortColumn=a)}function f(b,c){g.currentPage=b,e(c);var d=a.onPageChange({newPageNumber:b,search:a.search,itemsPerPage:g.pageSize,groupByColumn:a.groupByColumn,sortColumn:g.sortColumn,sortReverse:g.sortReverse});g.totalItems=d.totalItems,g.items=d.items}var g=this;g.sortColumn=null,g.sortReverse=null,g.items=[],g.totalItems=0,g.pageSize=a.itemsPerPage||10,g.currentPage=1,g.pageChanged=f,g.addGroupingRow=c,g.sortable=d,g.itemsNotEmpty=b,g.pageChanged(1),a.$watch("search",function(){g.pageChanged(1)}),a.$watch("itemsPerPage",function(a){g.pageSize=a,g.pageChanged(1)})}var d=b.module("ccMaterialTable",["ngMaterial","angularUtils.directives.dirPagination"]);d.directive("addFlex",function(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.addFlex);d.flex&&b.attr("flex",d.flex),d.flexSm&&b.attr("flex-sm",d.flexSm),d.hideSm&&b.attr("hide-sm","")}}}),d.directive("ccMdTable",function(){return{restrict:"E",scope:{columns:"=",search:"@",onPageChange:"&",rowExpanded:"@",itemsPerPage:"@",paginationId:"@",groupByColumn:"@",groupByTemplate:"@"},template:'            <div layout="column" class="cc-grid" ng-show="$materialTableCtrl.itemsNotEmpty()">                <div layout="row" layout-fill class="cc-grid-row-header" >                    <div class="cc-grid-row-content cc-grid-first-row-content" ng-show="rowExpanded">                    </div>                    <div flex layout="row" class="cc-grid-row-content">                        <div add-flex="{{column}}" layout-margin layout-fill layout-padding ng-repeat="column in columns" class="cc-grid-cell-content" ng-click="$materialTableCtrl.pageChanged(1, column.name)">                            {{ column.header }} {{ $materialTableCtrl.sortable(column.name) }}                         </div>                    </div>                </div>                <md-divider class=""></md-divider>                <div layout="column" layout-fill dir-paginate="item in $materialTableCtrl.items | itemsPerPage: $materialTableCtrl.pageSize" pagination-id="paginationId" current-page="$materialTableCtrl.currentPage" total-items="$materialTableCtrl.totalItems">                    <div layout="row" layout-margin layout-fill layout-padding class="cc-grid-row" ng-if="$materialTableCtrl.addGroupingRow($first, $index)">                        <ng-include src="groupByTemplate" ng-if="groupByTemplate"></ng-include>                        <span ng-if="!groupByTemplate">{{ $materialTableCtrl.items[$index][groupByColumn] }}</span>                    </div>                    <md-divider ng-if="$materialTableCtrl.addGroupingRow($first, $index)"></md-divider>                    <div layout="row" layout-fill class="cc-grid-row">                        <div class="cc-grid-row-content cc-grid-first-row-content" ng-show="rowExpanded" ng-click="checked = !checked">                            <div ng-show="checked">-</div>                            <div ng-show="!checked">+</div>                        </div>                        <div layout="column" layout-fill>                            <div flex layout="row" class="cc-grid-row-content" ng-class="{\'cc-grid-row-expanded-active\': checked}">                                <div add-flex="{{column}}" layout-margin layout-fill layout-padding ng-repeat="column in columns" class="cc-grid-cell-content {{column.class}}">                                    <ng-include src="column.custom" ng-if="column.custom"></ng-include>                                    <span ng-if="!column.custom">{{ item[column.name] }}</span>                                </div>                            </div>                            <div layout-margin layout-fill layout-padding class="cc-grid-row-content cc-grid-row-expanded-content" ng-if="checked && rowExpanded">                                <ng-include src="rowExpanded"></ng-include>                            </div>                        </div>                    </div>                    <md-divider></md-divider>                </div>                <div layout="row" layout-align="center" layout-padding>                     <dir-pagination-controls on-page-change="$materialTableCtrl.pageChanged(newPageNumber)" pagination-id="paginationId" boundary-links="true"></dir-pagination-controls>                </div>            </div>',controller:"MaterialTableCtrl",controllerAs:"$materialTableCtrl",link:function(){}}}),b.module("ccMaterialTable").controller("MaterialTableCtrl",c)}(window,window.angular);